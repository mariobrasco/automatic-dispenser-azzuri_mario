<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ESP8266 Web Server</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Lexend:wght@100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>   
    <div class="container">
        <h1 class="judul_auto">Automatic Dispenser</h1><br><br>
            <div class="container_output">
                    <div class="mode">
                        <label class="teks_mode">Status</label><br><br>
                        <div class="teks_status">
                            <p class="value" id="status">Mati</p>
                        </div>
                    </div>
                    <div class="jarak">
                        <label class="teks_jarak">Jarak</label><br><br>
                        <div class="output">
                            <div class="jarak_output">
                                <p class="value" id="distance"></p>
                            </div>
                        </div>
                    </div>         
            </div>
    </div>

    <!-- the scripts for products you want to access must be added-->

	<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

	<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCpod57EuUr-Pmur6SA2EARwvNCNl24L0Q",
          authDomain: "automation-dispenser-azzuri.firebaseapp.com",
          databaseURL: "https://automation-dispenser-azzuri-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "automation-dispenser-azzuri",
          storageBucket: "automation-dispenser-azzuri.firebasestorage.app",
          messagingSenderId: "1041303536388",
          appId: "1:1041303536388:web:fd198ab890d975c5c84651",
          measurementId: "G-BFKXFRT3S4"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        // const analytics = getAnalytics(app);

        //getting reference to the database
        var database = firebase.database();

        //getting reference to the data we want
        var dataRef1 = database.ref('dispenser/distance');
        var dataRef2 = database.ref('dispenser/status');

        //fetch the data
        dataRef1.on('value', function(getdata1){
            var distance = getdata1.val();
            document.getElementById('distance').innerHTML = distance + " cm";
        })

        dataRef2.on('value', function(getdata2){
            var status = getdata2.val();
            document.getElementById('status').innerHTML = status;
        })
      </script>

</body>
</html>
